{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    {% block title %}
    <title>Book_Store</title>
  {% endblock %}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" type="text/css" href="/static/dist/css/adminx.css" media="screen" />
  
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>
    <link rel="shortcut" href="/ststic/logo.svg">
    <!--
      # Optional Resources
      Feel free to delete these if you don't need them in your project
    -->
        <script>   
        function playSound(filename){
            var mp3Source = '<source src="/static/src/media/notification.mp3" type="audio/mpeg">';
            var oggSource = '<source src="' + filename + '.ogg" type="audio/ogg">';
            var embedSource = '<embed hidden="true" autostart="true" loop="false" src="/static/src/media/notification.mp3">';
            document.getElementById("sound").innerHTML='<audio autoplay="autoplay">' + mp3Source + oggSource + embedSource + '</audio>';
          }
         </script>

     <script>
        
 
      function ajax_function(url,value,cfunction) {
        console.log("Working ");
        var data;
        if (window.XMLHttpRequest) {
        var xhttp=new XMLHttpRequest();
        } else {  // code for IE6, IE5
        var xhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xhttp.onreadystatechange = function() {
        if (xhttp.readyState === 4 && xhttp.status === 200) {
              var data = JSON.parse(this.responseText);
        cfunction(data);
        }
        };
        xhttp.open("GET", url+"?value="+value, true);
        xhttp.send();
        }

    
    </script>
  </head>

  <style>
    .card{
      box-shadow: 5px 8px 8px  #888888;
    }
  </style>

  <body onload="startTime()">

{% if messages %}
{% for message  in messages %}
<!-- Note a custom script is used to activate toasts:
$('.toast').toast();
-->

<div class="content-blocker" id="blocker">
  <center style="margin-top:200px;"><!-- Note a custom script is used to activate toasts:
$('.toast').toast();
-->

<div class="toast fade show bg-{{ message.tags }}" style="width:300px; height:130px;  padding:10px; box-shadow:5px 6px 8px black;" role="alert" aria-live="assertive" aria-atomic="true">
  <div class="toast-header">
    <strong class="mr-auto"><font color="white">Xabar</font></strong>
    <small></small>
    <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
      <span aria-hidden="true" onclick="CloseToast()">Ã—</span>
    </button>
  </div>
  <div class="toast-body">
    <font color="white">{{ message }}</font>
  </div>
</div>
</center>  
</div>
  <style>
    .content-blocker {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(136, 136, 204, 0.5);
      z-index: 4444;
    }
  </style>
  <script>
function CloseToast(){
  document.getElementById('blocker').style="display:none;";
}
  </script>
  {% endfor %}
  {% endif %}






    <div class="adminx-container">
      <nav class="navbar navbar-expand justify-content-between fixed-top">
        <a class="navbar-brand mb-0 h1 d-none d-md-block" href="#">
          <img src="/static/demo/img/logo.png" class="navbar-brand-image d-inline-block align-top mr-2" alt="">
          Book_Store

          
        </a>

        <form id="search_form" class="form-inline form-quicksearch d-none d-md-block mx-auto">
          <div class="input-group">
            <div class="input-group-prepend">
              <div class="input-group-icon">
                <i data-feather="search"></i>
              </div>
            </div>
        
          <input type="text" onkeyup="ajax_function('{% url 'product:search_product' %}',this.value,SearchProduct)"  class="form-control" id="search" placeholder="Tovar izlash..." title="Tovar nomini kiriting...">
          </div>
        </form>

     


        <div class="d-flex flex-1 d-block d-md-none">
          <a href="#" class="sidebar-toggle ml-3">
            <i data-feather="menu"></i>
          </a>
        </div>

        <ul class="navbar-nav d-flex justify-content-end mr-2">
          <!-- Notificatoins -->
          {% if not close_wrapper_cart %}
          <div class="animate">
          <li class="nav-item dropdown d-flex align-items-center mr-2">
            <a class="cartt nav-link nav-link-notifications mt-2" title="Savatcha" id="dropdownNotifications" data-toggle="dropdown" href="#">
              <i id="cart_icon" class="oi oi-cart display-inline-block align-middle"></i>
              <span class="nav-link-notification-number" id="cart_items_total">{{ cart.items.count }}</span>
            </a>
            <div class="dropdown-menu dropdown-menu-right dropdown-menu-notifications" aria-labelledby="dropdownNotifications" style="max-width:30rem;   padding-bottom:5px;">
              <div class="notifications-header d-flex justify-content-between align-items-center">
                <span class="notifications-header-title">
                    Jami tovar soni <i id="all_count" class="text-primary">{{ cart.all_qty }}</i> 
                </span>
                <strong>Jami summa <b id="itog" class="text-primary">{{ cart.cart_total}}</b>  </strong>
              </div>
               
                  
              <div class="list-group" id="cart_wrapper">
                

              </div>

              <div class="notifications-footer text-center" style="padding-top:10px; height:50px;">
                <a href="{% url 'books:cart_view'  %}"><small>Barcha tanlangan tovarlar</small></a>
              </div>
            </div>
          </li>
        </div>
        {% endif %}
          <!-- Notifications -->
          <li class="nav-item dropdown">
            <a class="nav-link avatar-with-name" id="navbarDropdownMenuLink" data-toggle="dropdown" href="#">
              <img src="/static/src/images/boyuser.svg" class="d-inline-block align-top" alt="">
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
              <a class="dropdown-item" href="{% url 'books:page_views' 'user' %}">Profil</a>
              <a class="dropdown-item" href="#">Statistika</a>
              <a class="dropdown-item" href="#">Sozlamalar</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item text-danger" href="#">Chiqish</a>
            </div>
          </li>
        </ul>
      </nav>
      <div class="inner_id"></div>




{% include 'includes/wrapper_ajax.html'%}




<button id="show_alert"  style="display:none;" type="button">Click me </button>

 <div id="alert-box">
    <div class="" id="dynamic_bg" role="alert">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <strong id="alert_title">Bajarildi</strong> <b id="alert_body">Tovar savatchaga qo'shildi!</b>
</div>
</div>

<script>
function startTime() {
  var today = new Date();
  var h = today.getHours();
  var m = today.getMinutes();
  var s = today.getSeconds();
  m = checkTime(m);
  s = checkTime(s);
  document.getElementById('time').innerHTML =
  h + ":" + m + ":" + s;
  var t = setTimeout(startTime, 500);
}
function checkTime(i) {
  if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
  return i;
}
</script>






<nav aria-label="breadcrumb" id="searchdiv" class="bg-light p-3 mb-5">
  <ol class="breadcrumb" id="search_results">
  </ol>
</nav>
 <script>
function SearchProduct(data){
    var searchdiv = document.getElementById('searchdiv');
    var search_results = document.getElementById('search_results');
  if(data.list.length > 0){
    var div = '<div>';
    for(var i=0; i<data.list.length; i++){
      div +='<li class="breadcrumb-item  text-center" aria-current="page" style="margin:7px auto;"> <b>'+data.list[i].title+'</b><a href="http://localhost:8000/product/catalog/'+data.list[i].category_id+'"> <i class="text-primary">'+data.list[i].category+'</i></a> <i class="text-muted">'+data.list[i].author+'</i><i class="text-info">'+data.list[i].quantity+'</i> <small>dona</small> <i class="text-info">'+data.list[i].price+'</i> <small>uzs</small> <a href="#" onclick="AddToCart('+data.list[i].product_id+')" ><img class="cart_svg" src="{% static "src/images/addcart.svg" %}" width="40"></a> <a href="#" class="btn btn-sm btn-outline-primary"><i data-feather="edit"></i></a></li>'
    }
    div += '</div>';
    search_results.innerHTML = div;
    searchdiv.style = 'display:block';

  }
  else{
    var div = '<li class="breadcrumb-item  text-center" aria-current="page" style="margin:7px auto;">Ma`lumot topilmadi</li>';
    searchdiv.style = 'display:none';
  }
    search_results.innerHTML = div;

}
 </script>  
<style>
.cart_svg: hover{
  width:60px;
  background:orange;
}

#alert-box{
  width: 30%;
  float: right;
  top: 3.7rem;
  left:55rem;
  z-index: 445;
  position: fixed;
  display: none;
}
  .breadcrumb i{
      padding-left:8px;
  }


  .breadcrumb i{
      padding-left:8px;
  }
  #searchdiv{
    display: none;
    width:65%; 
    top:3.5rem; 
    left:22.5%; 
    right:22.5%;  
    text-align:center; 
    padding:8px; 
    font-size:20px; 
    position: fixed; 
    z-index:444;
    border-radius:15px;
    box-shadow:0px 1px 2px 2px black;

  }
</style>




     <!-- expand-hover push -->
      <!-- Sidebar -->
      <div class="adminx-sidebar expand-hover push">
        <ul class="sidebar-nav">
          <li class="sidebar-nav-item">
            <a href="{% url 'books:index' %}" class="sidebar-nav-link active">
              <span class="sidebar-nav-icon">
                <i data-feather="home"></i>
              </span>
              <span class="sidebar-nav-name">
                Bosh panel
              </span>
              <span class="sidebar-nav-end">

              </span>
            </a>
          </li>

          
          <li class="sidebar-nav-item">
            <a class="sidebar-nav-link collapsed" data-toggle="collapse" href="#product" aria-expanded="false" aria-controls="product">
              <span class="sidebar-nav-icon">
                <i data-feather="grid"></i>
              </span>
              <span class="sidebar-nav-name">
                Tovarlar
              </span>
              <span class="sidebar-nav-end">
                    <i data-feather="chevron-right" class="nav-collapse-icon"></i>
              </span>
            </a>
            <ul class="sidebar-sub-nav collapse" id="product">
              <li class="sidebar-nav-item">
                <a href="{% url 'books:add' %}" class="sidebar-nav-link">
                  <span class="sidebar-nav-abbr">
                    B
                  </span>
                  <span class="sidebar-nav-name">
                    Barcha tovarlar
                  </span>
                </a>
              </li>

              <li class="sidebar-nav-item">
                <a href="{% url 'books:add' %}" class="sidebar-nav-link">
                  <span class="sidebar-nav-abbr">
                    Q
                  </span>
                  <span class="sidebar-nav-name">
                    Tovar qo'shish
                  </span>
                </a>
              </li>

            </ul>
         
          </li>

          <li class="sidebar-nav-item">
            <a class="sidebar-nav-link collapsed" data-toggle="collapse" href="#example" aria-expanded="false" aria-controls="example">
              <span class="sidebar-nav-icon">
                <i data-feather="pie-chart"></i>
              </span>
              <span class="sidebar-nav-name">
                Statististika
              </span>
              <span class="sidebar-nav-end">
                <i data-feather="chevron-right" class="nav-collapse-icon"></i>
              </span>
            </a>

            <ul class="sidebar-sub-nav collapse" id="example">
              <li class="sidebar-nav-item">
                <a href="{% url 'books:page_views' 'income' %}" class="sidebar-nav-link">
                  <span class="sidebar-nav-abbr">
                    U
                  </span>
                  <span class="sidebar-nav-name">
                    Umumiy statistika
                  </span>
                </a>
              </li>
            </ul>
          </li>

          <li class="sidebar-nav-item">
            <a class="sidebar-nav-link collapsed" data-toggle="collapse" href="#navTables" aria-expanded="false" aria-controls="navTables">
              <span class="sidebar-nav-icon">
                <i data-feather="align-justify"></i>
              </span>
              <span class="sidebar-nav-name">
                Hisobot
              </span>
              <span class="sidebar-nav-end">
                <i data-feather="chevron-right" class="nav-collapse-icon"></i>
              </span>
            </a>

            <ul class="sidebar-sub-nav collapse" id="navTables">
              <li class="sidebar-nav-item">
                <a href="./layouts/tables.html" class="sidebar-nav-link">
                  <span class="sidebar-nav-abbr">
                    Oy
                  </span>
                  <span class="sidebar-nav-name">
                    Oylik
                  </span>
                </a>
              </li>

              <li class="sidebar-nav-item">
                <a href="./layouts/tables_data.html" class="sidebar-nav-link">
                  <span class="sidebar-nav-abbr">
                    Yil
                  </span>
                  <span class="sidebar-nav-name">
                    Yillik
                  </span>
                </a>
              </li>
            </ul>
          </li>

          <li class="sidebar-nav-item">
            <a class="sidebar-nav-link collapsed" data-toggle="collapse" href="#navForms" aria-expanded="false" aria-controls="navForms">
              <span class="sidebar-nav-icon">
                <i data-feather="edit"></i>
              </span>
              <span class="sidebar-nav-name">
                Tovar qo'shish
              </span>
              <span class="sidebar-nav-end">
                <i data-feather="chevron-right" class="nav-collapse-icon"></i>
              </span>
            </a>

            <ul class="sidebar-sub-nav collapse" id="navForms">
              <li class="sidebar-nav-item">
                <a href="{% url 'books:page_views' 'add' %}" class="sidebar-nav-link">
                  <span class="sidebar-nav-abbr">
                    O'
                  </span>
                  <span class="sidebar-nav-name">
                    O'quv qo'llanmalari
                  </span>
                </a>
              </li>
        <li class="sidebar-nav-item">
                <a href="{% url 'books:page_views' 'add' %}" class="sidebar-nav-link">
                  <span class="sidebar-nav-abbr">
                    F
                  </span>
                  <span class="sidebar-nav-name">
                    Fanlar
                  </span>
                </a>
              </li>
              <li class="sidebar-nav-item">
                <a href="{% url 'books:page_views' 'add' %}" class="sidebar-nav-link">
                  <span class="sidebar-nav-abbr">
                    A
                  </span>
                  <span class="sidebar-nav-name">
                    Adabiyotlar
                  </span>
                </a>
              </li>

              <li class="sidebar-nav-item">
                <a href="{% url 'books:page_views' 'add' %}" class="sidebar-nav-link">
                  <span class="sidebar-nav-abbr">
                    K
                  </span>
                  <span class="sidebar-nav-name">
                    Konselyariya
                  </span>
                </a>
              </li>

              

              <li class="sidebar-nav-item">
                <a href="{% url 'books:page_views' 'add' %}" class="sidebar-nav-link">
                  <span class="sidebar-nav-abbr">
                    B
                  </span>
                  <span class="sidebar-nav-name">
                    Boshqa tovarlar
                  </span>
                </a>
              </li>
            </ul>
          </li>


          <li class="sidebar-nav-item">
            <a class="sidebar-nav-link collapsed" data-toggle="collapse" href="#navExtra" aria-expanded="false" aria-controls="navExtra">
              <span class="sidebar-nav-icon">
                <i data-feather="layers"></i>
              </span>
              <span class="sidebar-nav-name">
                Sozlamalar
              </span>
              <span class="sidebar-nav-end">
                <i data-feather="chevron-right" class="nav-collapse-icon"></i>
              </span>
            </a>

            <ul class="sidebar-sub-nav collapse" id="navExtra">
              <li class="sidebar-nav-item">
                <a href="{% url 'books:page_views' 'settings' %}" class="sidebar-nav-link">
                  <span class="sidebar-nav-abbr">
                    D
                  </span>
                  <span class="sidebar-nav-name">
                    Dastur sozlamalari
                  </span>
                </a>
              </li>
                <li class="sidebar-nav-item">
                <a href="{% url 'books:page_views' 'settings' %}" class="sidebar-nav-link">
                  <span class="sidebar-nav-abbr">
                    Y
                  </span>
                  <span class="sidebar-nav-name">
                    Yordam
                  </span>
                </a>
              </li>
            </ul>
          </li>
        </ul>
      </div><!-- Sidebar End -->

      {% block content %}
      {% endblock %}
  <!-- If you prefer jQuery these are the required scripts -->
    <script src="/static/src/js/jquery-3.2.1.min.js"></script>
    <script src="/static/src/js/popper.min.js"></script>
    <script src="/static/src/js/bootstrap.min.js"></script>
    <script src="/static/dist/js/vendor.js"></script>
    <script src="/static/dist/js/adminx.js"></script>



    <!-- If you prefer vanilla JS these are the only required scripts -->
    <!-- script src="./dist/js/vendor.js"></script>
    <script src="./dist/js/adminx.vanilla.js"></script-->
  </body>
</html>